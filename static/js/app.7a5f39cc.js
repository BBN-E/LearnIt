(function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],g=0,d=[];g<s.length;g++)o=s[g],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"0756":function(e,t,n){"use strict";var r=n("788f"),a=n.n(r);a.a},1088:function(e,t,n){},"10f4":function(e,t,n){"use strict";var r=n("1e38"),a=n.n(r);a.a},"1e38":function(e,t,n){},"522c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d1e78");var r=n("2b0e"),a=n("2f62"),i=n("8c4f"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rootContainer learnitListcard"},[n("OntologyView"),n("v-toolbar",[n("v-toolbar-title",[e._v("LearnIt KB Builder")]),n("span",{staticClass:"title align-content-center pl-4 pr-2"},[e._v(e._s(e.targetName))]),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",disabled:e.targetName.length<1},on:{click:function(t){return e.clearUnaccept()}}},[e._v("Clear Unaccept")]),n("v-btn",{attrs:{flat:"",disabled:e.targetName.length<1},on:{click:function(t){return e.clearAll()}}},[e._v("Clear Everything")]),n("v-btn",{attrs:{flat:"",disabled:e.targetName.length<1},on:{click:function(t){return e.loadTargetAndScoreTable()}}},[e._v("Refresh")]),n("v-btn",{attrs:{flat:""},on:{click:function(t){return e.openOntologyPanel()}}},[e._v("Open Ontology Panel")])],1),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{flat:""},on:{click:function(t){return e.saveProgress()}}},[e._v("Save Progress")])],1),n("v-toolbar-items",[n("v-btn",{attrs:{flat:""},on:{click:function(t){return e.generateVisualization()}}},[e._v("Generate Visualization")])],1)],1),n("splitpanes",{staticStyle:{display:"flex","flex-direction":"column",height:"93%"},attrs:{horizontal:""}},[n("pane",{staticClass:"learnitListcard"},[n("TargetAndScoreTable")],1),n("pane",{staticClass:"learnitListcard"},[n("InstancePanel")],1)],1)],1)},s=[],l=n("bc3a"),c=n.n(l),u="",g=":5010",d={baseURL:u,baseTimelineURL:g,MaxNumberOfPatterns:200,MaxNumberOfSeeds:200,MaxNumberOfInstance:50,MaxNumberOfInstanceFromOTHER:250,NumberOfInstancePerPageInInstanceAnnotation:50,patternScoreTableDisplayableKeys:["precision","recall","confidence","frequency"],seedScoreTableDisplayableKeys:["confidence","frequency"],trueNegativeLabel:"NA",patternScoreTableSortableKeys:[{uitext:"overlap",backendtext:"overlap"},{uitext:"frequency",backendtext:"frequency"},{uitext:"precision",backendtext:"patternPrecision"},{uitext:"weightedPrecision",backendtext:"patternWeightedPrecision"},{uitext:"similarity",backendtext:"precision"}],seedScoreTableSortableKeys:[{uitext:"overlap",backendtext:"overlap"},{uitext:"frequency",backendtext:"frequency"},{uitext:"weightedPrecision",backendtext:"seedWeightedPrecision"},{uitext:"precision",backendtext:"seedPrecision"},{uitext:"similarity",backendtext:"precision"}],instanceFrozenGoodStr:"FROZEN_GOOD",instanceFrozenBadStr:"FROZEN_BAD",instanceNoFrozenStr:"NO_FROZEN",OTHERTargetName:"OTHER"},f={getOntology:function(){return c()({baseURL:d.baseURL,url:"/ontology/current_tree",method:"GET"})},addOntologyNode:function(e,t,n,r,a){return c()({baseURL:d.baseURL,url:"/ontology/add_target",method:"POST",params:{parentNodeId:e,id:t,description:n,slot0SpanningType:r,slot1SpanningType:a}})},addTargetAndScoreTable:function(e,t,n,r,a,i,o){return c()({baseURL:d.baseURL,url:"/init/add_target",method:"POST",params:{name:e,description:t,slot0EntityTypes:n,slot1EntityTypes:r,symmetric:a,slot0SpanningType:i,slot1SpanningType:o}})},loadTargetAndScoreTable:function(e){return c()({baseURL:d.baseURL,url:"/init/get_extractor",method:"POST",params:{relation:e}})},getPatternsByKeyword:function(e,t,n,r,a){return c()({baseURL:d.baseURL,url:"/init/get_patterns_by_keyword",method:"POST",params:{target:e,keyword:t,amount:n,fullTextSearchKey:r,sortingMethod:a}})},getSeedsBySlot:function(e,t,n,r,a,i){return c()({baseURL:d.baseURL,url:"/init/get_seeds_by_slots",method:"POST",params:{target:e,slot0:t,slot1:n,amount:r,fullTextSearchKey:a,sortingMethod:i}})},getPatternInstances:function(e,t,n,r){return c()({baseURL:d.baseURL,url:"/init/get_pattern_instances",method:"POST",params:{target:e,pattern:t,amount:n,fromOther:r}})},getSeedInstances:function(e,t,n,r){return c()({baseURL:d.baseURL,url:"/init/get_seed_instances",method:"POST",params:{target:e,seed:t,amount:n,fromOther:r}})},proposeSeeds:function(e){return c()({baseURL:d.baseURL,url:"/init/propose_seeds_new",method:"POST",params:{target:e}})},proposeLearnitPatterns:function(e){return c()({baseURL:d.baseURL,url:"/init/propose_patterns_new",method:"POST",params:{target:e}})},getSimilarSeeds:function(e){return c()({baseURL:d.baseURL,url:"/init/similar_seeds",method:"POST",params:{target:e}})},getSimilarLearnitPatterns:function(e){return c()({baseURL:d.baseURL,url:"/init/similar_patterns",method:"POST",params:{target:e}})},markSeed:function(e,t,n,r){return n?c()({baseURL:d.baseURL,url:"/init/add_seeds",method:"POST",params:{target:e,seeds:[t],quality:r?"good":"bad"}}):c()({baseURL:d.baseURL,url:"/init/remove_seed",method:"POST",params:{target:e,seed:t}})},markPattern:function(e,t,n,r){return n?c()({baseURL:d.baseURL,url:"/init/add_pattern",method:"POST",params:{target:e,pattern:t,quality:r?"good":"bad"}}):c()({baseURL:d.baseURL,url:"/init/remove_pattern",method:"POST",params:{target:e,pattern:t}})},saveProgress:function(){return c()({baseURL:d.baseURL,url:"/init/save_progress",method:"POST"})},generateVisualization:function(){return c()({baseURL:d.baseURL,url:"/init/generate_eer_graph",method:"POST"})},clearUnknown:function(e){return c()({baseURL:d.baseURL,url:"/init/clear_unknown",method:"POST",params:{target:e}})},clearAll:function(e){return c()({baseURL:d.baseURL,url:"/init/clear_all",method:"POST",params:{target:e}})},markInstance:function(e,t,n){return c()({baseURL:d.baseURL,url:"/init/add_instance",method:"POST",params:{target:e,instance:t,quality:n}})},unMarkInstance:function(e,t){return c()({baseURL:d.baseURL,url:"/init/remove_instance",method:"POST",params:{target:e,instance:t}})},markInstanceFromOther:function(e,t){return c()({baseURL:d.baseURL,url:"/init/mark_instance_from_other",method:"POST",params:{target:e,instance:t}})},markInstanceByPatternFromOther:function(e,t){return c()({baseURL:d.baseURL,url:"/init/mark_pattern_from_other",method:"POST",params:{target:e,pattern:t}})},markInstanceBySeedFromOther:function(e,t){return c()({baseURL:d.baseURL,url:"/init/mark_seed_from_other",method:"POST",params:{target:e,seed:t}})},getLabeledMappingInstances:function(e,t,n){return c()({baseURL:d.baseURL,url:"/init/get_labeled_mapping_instances",method:"POST",params:{target:e,fromOther:t,instancePerPage:d.NumberOfInstancePerPageInInstanceAnnotation,currentPage:n}})},getLabeledMappingNumberOfPages:function(e,t){return c()({baseURL:d.baseURL,url:"/init/get_labeled_mapping_number_of_pages",method:"POST",params:{target:e,fromOther:t,instancePerPage:d.NumberOfInstancePerPageInInstanceAnnotation}})},markInstanceFromLabeledMappings:function(e,t){return c()({baseURL:d.baseURL,url:"/init/mark_instance_from_labeled_mappings",method:"POST",params:{target:e,instance:t}})},dictionaryLookup:function(e){return c()({baseURL:d.baseURL,url:"/init/dictionary_lookup",method:"POST",params:{word:e}})},getEventTypeStatistics:function(){return c()({baseURL:d.baseTimelineURL,url:"/event_type_statistics",method:"GET"})},getEntityList:function(e,t,n){return c()({baseURL:d.baseTimelineURL,url:"/entity_list/",method:"GET",params:{event_type:e,start_timestamp:t,end_timestamp:n}})},getEventFrame:function(e,t,n,r){return c()({baseURL:d.baseTimelineURL,url:"/event_frame/",method:"POST",data:{event_type:e,start_timestamp:t,end_timestamp:n,other_constraint:r}})}},h=(n("a4d3"),n("e01a"),n("b64b"),n("d3b7"),n("8468")),b=(n("ddb0"),n("d4ec")),p=n("bee2"),v=n("99de"),y=n("7e84"),m=n("262e"),T=function(){function e(t,n,r,a,i){Object(b["a"])(this,e),this.key=t,this.originalObjJson=n,this.displayableStr=a,this.originalScoreTable=i,this.IDStr=r,this.localLabel=null}return Object(p["a"])(e,[{key:"toString",value:function(){return this.displayableStr}},{key:"getOriginalObjJson",value:function(){return this.originalObjJson}},{key:"getOriginalScoreTable",value:function(){return this.originalScoreTable}},{key:"getKey",value:function(){return this.key}},{key:"toIDString",value:function(){return this.IDStr}},{key:"getLocalLabel",value:function(){return this.localLabel}},{key:"setLocalLabel",value:function(e){this.localLabel=e}}]),e}(),S=function(e){function t(e,n){Object(b["a"])(this,t);var r="("+e.slot0.text[0]+","+e.slot1.text[0]+")",a=JSON.stringify(e);return Object(v["a"])(this,Object(y["a"])(t).call(this,a,e,e.toIDString,r,n))}return Object(m["a"])(t,e),Object(p["a"])(t,null,[{key:"fromJson",value:function(e,n){return new t(e,n)}}]),t}(T),O=function(e,t,n){return function(r,a){var i=n[r].getOriginalScoreTable(),o=n[a].getOriginalScoreTable(),s="undefined"===typeof i[e]?0:i[e],l="undefined"===typeof o[e]?0:o[e];if(t)return l-s}},_=function(e,t,n){return function(r){var a=n[r].getOriginalScoreTable();if(e){var i="undefined"===typeof a["score"]?0:a["score"];return t?a.frozen&&i>=.5:a.frozen&&i<.5}return!a.frozen}},k={Seed:S,loadSeedScoreTable:function(e){var t={};for(var n in e.entries){var r=e.entries[n],a=S.fromJson(e.keyList[r.key],e.valList[r.value]);t[a.key]=a}return t},sortSeedList:O,filterSeedList:_},E=(n("ac1f"),n("5319"),function(e){function t(e,n){Object(b["a"])(this,t);var r=JSON.stringify(e);return Object(v["a"])(this,Object(y["a"])(t).call(this,r,e,e.toIDString,e.toPrettyString.replace("[OTH]",""),n))}return Object(m["a"])(t,e),Object(p["a"])(t,null,[{key:"fromJson",value:function(e,n){return new t(e,n)}}]),t}(T)),x=function(e,t,n){return function(r,a){var i=n[r].getOriginalScoreTable(),o=n[a].getOriginalScoreTable(),s="undefined"===typeof i[e]?0:i[e],l="undefined"===typeof o[e]?0:o[e];if(t)return l-s}},w=function(e,t,n){return function(r){var a=n[r].getOriginalScoreTable();if(e){var i="undefined"===typeof a["precision"]?0:a["precision"];return t?a.frozen&&i>=.5:a.frozen&&i<.5}return!a.frozen}},M={normalizedPattern:E,loadPatternScoreTable:function(e){var t={};for(var n in e.entries){var r=e.entries[n],a=E.fromJson(e.keyList[r.key],e.valList[r.value]);t[a.key]=a}return t},sortPatternList:x,filterPatternList:w};r["default"].use(a["a"]);var P=!1,N=new a["a"].Store({strict:P,state:{targetAndScoreTable:{patternScoreTable:{},seedScoreTable:{}},targetName:"",targetAndScoreTableChosenItem:{key:"",type:null,learnitObservationObj:null},displayOntologyPanel:!1,siblingOntologyTypes:[],pendingMessage:"",errorMessage:"",numberOfPagesInLabelMapping:0,currentTimelineEventType:"",currentEventTypeTimelineCount:[]},getters:{targetName:function(e){return e.targetName},patternScoreTable:function(e){return e.targetAndScoreTable.patternScoreTable},seedScoreTable:function(e){return e.targetAndScoreTable.seedScoreTable},patternListInTargetAndScoreTable:function(e,t){return Object.keys(t.patternScoreTable)},seedListInTargetAndScoreTable:function(e,t){return Object.keys(t.seedScoreTable)},patternScore:function(e,t){return function(e){return t.patternScoreTable[e]}},seedScore:function(e,t){return function(e){return t.seedScoreTable[e]}},targetAndScoreTableChosenItem:function(e){return e.targetAndScoreTableChosenItem},displayOntologyPanel:function(e){return e.displayOntologyPanel},siblingOntologyTypes:function(e){return e.siblingOntologyTypes},pendingMessage:function(e){return e.pendingMessage},errorMessage:function(e){return e.errorMessage},numberOfPagesInLabelMapping:function(e){return e.numberOfPagesInLabelMapping},currentTimelineEventType:function(e){return e.currentTimelineEventType},currentEventTypeTimelineCount:function(e){return e.currentEventTypeTimelineCount}},mutations:{updateTargetAndScoreTable:function(e,t){e.targetAndScoreTable=t.targetAndScoreTable},updateMatchInfoDisplay:function(e,t){e.targetAndScoreTableChosenItem={key:t.key,type:t.type,learnitObservationObj:t.learnitObservationObj}},markSeed:function(e,t){var n=e.targetAndScoreTable.seedScoreTable[t.seedKey].getOriginalScoreTable();n.frozen=t.isFrozen,n.score=t.isGood?.95:.05},markPattern:function(e,t){var n=e.targetAndScoreTable.patternScoreTable[t.patternKey].getOriginalScoreTable();n.frozen=t.isFrozen,n.precision=t.isGood?.95:.05},toggleDisplayOntologyPanel:function(e){e.displayOntologyPanel=!e.displayOntologyPanel},changeTargetName:function(e,t){e.targetName=t.targetName},changeSiblingOntologyTypes:function(e,t){e.siblingOntologyTypes=t.siblingOntologyTypes},changePendingMessage:function(e,t){e.pendingMessage=t.pendingMessage},changeErrorMessage:function(e,t){e.errorMessage=t.errorMessage},setNumberOfPagesInLabelMapping:function(e,t){e.numberOfPagesInLabelMapping=t.numberOfPagesInLabelMapping},changeCurrentTimelineEventType:function(e,t){e.currentTimelineEventType=t.currentTimelineEventType},updatetEventTypeTimelineCount:function(e,t){e.currentEventTypeTimelineCount=t.currentEventTypeTimelineCount}},actions:{loadTargetAndScoreTable:function(e,t){var n=e.commit,r=e.dispatch;return new Promise((function(e,a){var i=t.targetName;n("updateMatchInfoDisplay",{key:"",type:null,learnitObservationObj:null}),f.loadTargetAndScoreTable(i).then((function(t){var r=M.loadPatternScoreTable(t.data.patternScores.data),a=k.loadSeedScoreTable(t.data.seedScores.data),o={patternScoreTable:r,seedScoreTable:a};n("changeTargetName",{targetName:i}),n("updateTargetAndScoreTable",{targetAndScoreTable:o}),n("updateMatchInfoDisplay",{key:"",type:null,learnitObservationObj:null}),e()}),(function(i){!0===t.tryCreateTarget?(t.tryCreateTarget=!1,r("addTargetAndScoreTable",t).then((function(){r("loadTargetAndScoreTable",t).then((function(){e()}),(function(e){a(e)}))}),(function(e){n("changeTargetName",{targetName:""}),a(e)}))):(n("changeTargetName",{targetName:""}),a(i))}))}))},loadLabelMappingAnnotationView:function(e,t){var n=e.commit,r=(e.dispatch,t.targetName);return n("setNumberOfPagesInLabelMapping",{numberOfPagesInLabelMapping:0}),n("changeTargetName",{targetName:""}),new Promise((function(e,t){f.getLabeledMappingNumberOfPages(r,!1).then((function(t){n("setNumberOfPagesInLabelMapping",{numberOfPagesInLabelMapping:t.data}),n("changeTargetName",{targetName:r}),e()}),(function(e){n("changeTargetName",{targetName:""}),t(e)}))}))},addTargetAndScoreTable:function(e,t){return Object(h["a"])(e),new Promise((function(e,n){f.addTargetAndScoreTable(t.targetName,t.description,t.slot0EntityTypes,t.slot1EntityTypes,t.symmetric,t.slot0SpanningType,t.slot1SpanningType).then((function(){e()}),(function(){n()}))}))},markSeed:function(e,t){var n=e.commit,r=e.getters;f.markSeed(r.targetName,t.seed.getOriginalObjJson(),t.isFrozen,t.isGood).then((function(){n("markSeed",{seedKey:t.seed.getKey(),isFrozen:t.isFrozen,isGood:t.isGood})}),(function(e){n("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},markPattern:function(e,t){var n=e.commit,r=e.getters;f.markPattern(r.targetName,t.pattern.toIDString(),t.isFrozen,t.isGood).then((function(){n("markPattern",{patternKey:t.pattern.getKey(),isFrozen:t.isFrozen,isGood:t.isGood})}),(function(e){n("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},lookingEventTimeline:function(e,t){var n=e.commit;return new Promise((function(e,r){f.getEventTypeStatistics().then((function(a){var i=a.data;t.timelineEventType in i?(n("changeCurrentTimelineEventType",{currentTimelineEventType:t.timelineEventType}),n("updatetEventTypeTimelineCount",{currentEventTypeTimelineCount:i[t.timelineEventType]}),e()):r("Cannot find event timeline date for type "+t.timelineEventType)}),(function(e){r(e)}))}))}}}),L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{column:""}},[n("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.ontologyPanelToggle,callback:function(t){e.ontologyPanelToggle=t},expression:"ontologyPanelToggle"}},[n("v-card",[n("v-toolbar",{attrs:{color:"teal",dark:""}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){return e.toggleOntologyPanel()}}},[n("v-icon",[e._v("close")])],1),n("v-toolbar-title",[e._v("Ontology Panel")]),n("v-spacer")],1),n("v-card-text",[n("v-layout",{attrs:{column:""}},[n("span",{staticClass:"subheading"},[e._v("Event "),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleOntologyTree("unaryEvent")}}},[n("v-icon",[e._v(e._s(e.toggleUnaryEvent?"expand_more":"expand_less"))])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(e.unaryEvent,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.switchToLabelMappingAnnotationView(e.unaryEvent)}}},[n("v-icon",[e._v("reorder")])],1)],1),n("v-flex",{staticStyle:{"overflow-y":"scoll"}},[n("v-treeview",{attrs:{items:e.unaryEvent.children,"item-key":"originalKey","item-text":"originalKey",open:e.unaryEvent.openNodes},scopedSlots:e._u([{key:"label",fn:function(t){var r=t.item;return[n("span",{domProps:{textContent:e._s(r.originalKey)}}),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(r,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.changeTarget(r)}}},[n("v-icon",[e._v("forward")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.showEventTimeline(r)}}},[n("v-icon",[e._v("history")])],1)]}}])})],1),n("span",{staticClass:"subheading"},[e._v("Event-Event Relation "),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleOntologyTree("binaryEvent")}}},[n("v-icon",[e._v(e._s(e.toggleBinaryEvent?"expand_more":"expand_less"))])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(e.binaryEvent,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.switchToLabelMappingAnnotationView(e.binaryEvent)}}},[n("v-icon",[e._v("reorder")])],1)],1),n("v-flex",{staticStyle:{"overflow-y":"scoll"}},[n("v-treeview",{attrs:{items:e.binaryEvent.children,"item-key":"originalKey","item-text":"originalKey",open:e.binaryEvent.openNodes},scopedSlots:e._u([{key:"label",fn:function(t){var r=t.item;return[n("span",{domProps:{textContent:e._s(r.originalKey)}}),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(r,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.changeTarget(r)}}},[n("v-icon",[e._v("forward")])],1)]}}])})],1),n("span",{staticClass:"subheading"},[e._v("Entity "),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleOntologyTree("unaryEntity")}}},[n("v-icon",[e._v(e._s(e.toggleUnaryEntity?"expand_more":"expand_less"))])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(e.unaryEntity,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.switchToLabelMappingAnnotationView(e.unaryEntity)}}},[n("v-icon",[e._v("reorder")])],1)],1),n("v-flex",{staticStyle:{"overflow-y":"scoll"}},[n("v-treeview",{attrs:{items:e.unaryEntity.children,"item-key":"originalKey","item-text":"originalKey",open:e.unaryEntity.openNodes},scopedSlots:e._u([{key:"label",fn:function(t){var r=t.item;return[n("span",{domProps:{textContent:e._s(r.originalKey)}}),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(r,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.changeTarget(r)}}},[n("v-icon",[e._v("forward")])],1)]}}])})],1),n("span",{staticClass:"subheading"},[e._v("Entity-Entity Relation "),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleOntologyTree("binaryEntity")}}},[n("v-icon",[e._v(e._s(e.toggleBinaryEntity?"expand_more":"expand_less"))])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(e.binaryEntity,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.switchToLabelMappingAnnotationView(e.binaryEntity)}}},[n("v-icon",[e._v("reorder")])],1)],1),n("v-flex",{staticStyle:{"overflow-y":"scoll"}},[n("v-treeview",{attrs:{items:e.binaryEntity.children,"item-key":"originalKey","item-text":"originalKey",open:e.binaryEntity.openNodes},scopedSlots:e._u([{key:"label",fn:function(t){var r=t.item;return[n("span",{domProps:{textContent:e._s(r.originalKey)}}),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(r,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.changeTarget(r)}}},[n("v-icon",[e._v("forward")])],1)]}}])})],1),n("span",{staticClass:"subheading"},[e._v("Event-Entity/ValueMention Relation "),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.toggleOntologyTree("binaryEventEntityOrValueMention")}}},[n("v-icon",[e._v(e._s(e.toggleBinaryEventEntityOrValueMention?"expand_more":"expand_less"))])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(e.binaryEventEntityOrValueMention,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.switchToLabelMappingAnnotationView(e.binaryEventEntityOrValueMention)}}},[n("v-icon",[e._v("reorder")])],1)],1),n("v-flex",{staticStyle:{"overflow-y":"scoll"}},[n("v-treeview",{attrs:{items:e.binaryEventEntityOrValueMention.children,"item-key":"originalKey","item-text":"originalKey",open:e.binaryEventEntityOrValueMention.openNodes},scopedSlots:e._u([{key:"label",fn:function(t){var r=t.item;return[n("span",{domProps:{textContent:e._s(r.originalKey)}}),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.addNewTarget(r,t)}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.changeTarget(r)}}},[n("v-icon",[e._v("forward")])],1)]}}])})],1)],1)],1)],1)],1),n("AddTarget",{attrs:{dialog:e.addTargetToggle},on:{"update:dialog":function(t){e.addTargetToggle=t}}})],1)},I=[],A=(n("d28b"),n("a630"),n("6062"),n("3ca3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Add New Target")]),n("v-card-text",[n("v-form",{attrs:{"lazy-validation":""}},[n("v-container",[n("v-text-field",{attrs:{label:"Name"},model:{value:e.newTargetName,callback:function(t){e.newTargetName=t},expression:"newTargetName"}}),n("v-text-field",{attrs:{label:"Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),n("v-switch",{attrs:{label:"Symmetrical"}}),n("v-select",{attrs:{multiple:"",label:"First Slot Types",items:e.entityTypes}}),n("v-select",{attrs:{multiple:"",label:"Second Slot Types",items:e.entityTypes}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"red darken-1",flat:""},on:{click:function(t){return e.closeDialog()}}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"green darken-1",flat:""},on:{click:function(t){return e.addOntologyNode()}}},[e._v("Add")])],1)],1)],1)],1)}),C=[],R={name:"addTargetDialog",props:{dialog:{required:!0,type:Boolean}},data:function(){return{entityTypes:["PER","ORG","GPE","LOC","WEA","VEH","FAC"],newTargetName:"",description:""}},methods:{closeDialog:function(){this.$parent.$emit("closeDialog","dialog")},addOntologyNode:function(){var e=this,t=function(e){while(e.parent)e=e.parent;return e},n=t(this.$parent.addTargetFocusRoot).slot0SpanningType,r=t(this.$parent.addTargetFocusRoot).slot1SpanningType;f.addOntologyNode(this.$parent.addTargetFocusRoot.originalKey,this.newTargetName,this.description,n,r).then((function(t){f.addTargetAndScoreTable(e.newTargetName,e.description,"","",!1,n,r).then((function(t){e.newTargetName="",e.description="",e.closeDialog()}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))}}},$=R,z=n("2877"),K=Object(z["a"])($,A,C,!1,null,"5d17a950",null),j=K.exports,F={name:"OntologyView",store:N,computed:{ontologyPanelToggle:function(){return this.$store.getters.displayOntologyPanel}},methods:{bindParent:function(e){var t=this;e.parent=null;var n=!0,r=!1,a=void 0;try{for(var i,o=e.children[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;t.bindParent(s),s.parent=e}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}},addNewTarget:function(e,t){this.addTargetFocusRoot=e,this.addTargetToggle=!this.addTargetToggle},toggleOntologyPanel:function(){this.$store.commit("toggleDisplayOntologyPanel")},reloadOntologyTree:function(){var e=this;f.getOntology().then((function(t){e.unaryEvent.children=t.data.unaryEvent.children,e.bindParent(e.unaryEvent),e.unaryEvent.originalKey=t.data.unaryEvent.originalKey,e.binaryEvent.children=t.data.binaryEvent.children,e.bindParent(e.binaryEvent),e.binaryEvent.originalKey=t.data.binaryEvent.originalKey,e.binaryEntity.children=t.data.binaryEntity.children,e.bindParent(e.binaryEntity),e.binaryEntity.originalKey=t.data.binaryEntity.originalKey,e.unaryEntity.children=t.data.unaryEntity.children,e.bindParent(e.unaryEntity),e.unaryEntity.originalKey=t.data.unaryEntity.originalKey,e.binaryEventEntityOrValueMention.children=t.data.binaryEventEntityOrValueMention.children,e.bindParent(e.binaryEventEntityOrValueMention),e.binaryEventEntityOrValueMention.originalKey=t.data.binaryEventEntityOrValueMention.originalKey}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},dfsGetAllChildren:function(e,t){t.add(e.originalKey);var n=!0,r=!1,a=void 0;try{for(var i,o=e.children[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;this.dfsGetAllChildren(s,t)}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}},changeTarget:function(e){var t=this,n=e;while(n.parent)n=n.parent;var r=n.slot0SpanningType,a=n.slot1SpanningType,i=new Set,o=!0,s=!1,l=void 0;try{for(var c,u=n.children[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var g=c.value;this.dfsGetAllChildren(g,i)}}catch(d){s=!0,l=d}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}this.$store.dispatch("loadTargetAndScoreTable",{targetName:e.originalKey,description:"NA",slot0EntityTypes:"",slot1EntityTypes:"",symmetric:!1,slot0SpanningType:r,slot1SpanningType:a,tryCreateTarget:!0}).then((function(e){t.$store.commit("changeSiblingOntologyTypes",{siblingOntologyTypes:Array.from(i)}),t.toggleOntologyPanel()}),(function(e){t.$store.commit("changeSiblingOntologyTypes",{siblingOntologyTypes:[]}),t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},showEventTimeline:function(e){var t=this;this.$store.dispatch("lookingEventTimeline",{timelineEventType:e.originalKey}).then((function(e){t.$router.replace({name:"TimelineMain"})}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},switchToLabelMappingAnnotationView:function(e){var t=this,n=e;while(n.parent)n=n.parent;n.slot0SpanningType,n.slot1SpanningType;var r=new Set,a=!0,i=!1,o=void 0;try{for(var s,l=n.children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;this.dfsGetAllChildren(c,r)}}catch(u){i=!0,o=u}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}this.$store.dispatch("loadLabelMappingAnnotationView",{targetName:e.originalKey}).then((function(e){t.$store.commit("changeSiblingOntologyTypes",{siblingOntologyTypes:Array.from(r)}),t.$router.replace({name:"LabeledMappingsView"})}),(function(e){t.$store.commit("changeSiblingOntologyTypes",{siblingOntologyTypes:[]}),t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},toggleTreeOn:function(e,t){t.push(e._id);var n=!0,r=!1,a=void 0;try{for(var i,o=e.children[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;this.toggleTreeOn(s,t)}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}},toggleOntologyTree:function(e){switch(e){case"unaryEvent":this.toggleUnaryEvent?this.toggleTreeOn(this.unaryEvent,this.unaryEvent.openNodes):this.unaryEvent.openNodes=[],this.toggleUnaryEvent=!this.toggleUnaryEvent;break;case"binaryEvent":this.toggleBinaryEvent?this.toggleTreeOn(this.binaryEvent,this.binaryEvent.openNodes):this.binaryEvent.openNodes=[],this.toggleBinaryEvent=!this.toggleBinaryEvent;break;case"binaryEntity":this.toggleBinaryEntity?this.toggleTreeOn(this.binaryEntity,this.binaryEntity.openNodes):this.binaryEntity.openNodes=[],this.toggleBinaryEntity=!this.toggleBinaryEntity;break;case"unaryEntity":this.toggleUnaryEntity?this.toggleTreeOn(this.unaryEntity,this.unaryEntity.openNodes):this.unaryEntity.openNodes=[],this.toggleUnaryEntity=!this.toggleUnaryEntity;break;case"binaryEventEntityOrValueMention":this.toggleBinaryEventEntityOrValueMention?this.toggleTreeOn(this.binaryEventEntityOrValueMention,this.binaryEventEntityOrValueMention.openNodes):this.binaryEventEntityOrValueMention.openNodes=[],this.toggleBinaryEventEntityOrValueMention=!this.toggleBinaryEventEntityOrValueMention;break}}},mounted:function(){this.reloadOntologyTree()},created:function(){var e=this;this.$on("closeDialog",(function(t){e.addTargetToggle=!e.addTargetToggle,e.reloadOntologyTree()}))},data:function(){var e=this,t={originalKey:"Unary Event",children:[],slot0SpanningType:"EventMention",slot1SpanningType:"Empty",openNodes:[]};e.bindParent(t);var n={originalKey:"Binary Event",children:[],slot0SpanningType:"EventMention",slot1SpanningType:"EventMention",openNodes:[]};e.bindParent(n);var r={originalKey:"Binary Entity",children:[],slot0SpanningType:"Mention",slot1SpanningType:"Mention",openNodes:[]};e.bindParent(r);var a={originalKey:"Unary Entity",children:[],slot0SpanningType:"Mention",slot1SpanningType:"Empty",openNodes:[]};e.bindParent(a);var i={originalKey:"Event EntityOrValueMention",children:[],slot0SpanningType:"EventMention",slot1SpanningType:"Mention,ValueMention",openNodes:[]};return e.bindParent(i),{unaryEvent:t,binaryEvent:n,binaryEntity:r,unaryEntity:a,binaryEventEntityOrValueMention:i,addTargetToggle:!1,addTargetFocusRoot:null,toggleUnaryEvent:!1,toggleBinaryEvent:!1,toggleBinaryEntity:!1,toggleUnaryEntity:!1,toggleBinaryEventEntityOrValueMention:!1}},components:{AddTarget:j}},U=F,B=(n("0756"),Object(z["a"])(U,L,I,!1,null,"8e872c08",null)),J=B.exports,D=n("512e"),V=(n("c1ea"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"learnitListcard"},[n("splitpanes",{staticClass:"learnitListcard",staticStyle:{display:"flex","flex-direction":"row"}},[n("pane",{staticClass:"learnitListcard"},[n("LearnitPatternPanel")],1),n("pane",{staticClass:"learnitListcard"},[n("SeedPanel")],1)],1)],1)}),G=[],H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"learnitListcard"},[n("v-card-title",{staticClass:"subheading",attrs:{"primary-title":""}},[e._v(" Patterns ( "+e._s(e.numberOfFrozenPattern)+"/"+e._s(e.numberOfPattern)+" ) "),n("v-spacer"),n("v-select",{attrs:{items:e.sortingMethodCandidates,label:"Sorting Method",disabled:e.targetName.length<1,"item-text":"uitext","item-value":"backendtext"},model:{value:e.sortingMethod,callback:function(t){e.sortingMethod=t},expression:"sortingMethod"}}),n("v-switch",{attrs:{label:"Reverse",disabled:e.targetName.length<1},model:{value:e.sortingReverse,callback:function(t){e.sortingReverse=t},expression:"sortingReverse"}})],1),e.showAddPanel?n("div",{staticStyle:{display:"flex"}},[n("v-text-field",{staticStyle:{flex:"2"},attrs:{label:"Keyword"},model:{value:e.patternKeyword,callback:function(t){e.patternKeyword=t},expression:"patternKeyword"}}),n("v-text-field",{staticStyle:{flex:"1"},attrs:{label:"FullTextSearchKey"},model:{value:e.fullTextSearchKey,callback:function(t){e.fullTextSearchKey=t},expression:"fullTextSearchKey"}}),n("v-btn",{staticStyle:{flex:"2"},on:{click:e.searchPatternsByKeywords}},[e._v("Search")])],1):e._e(),n("v-list",{staticStyle:{"overflow-y":"scroll","flex-basis":"70%"},attrs:{"three-line":""}},e._l(e.patternList,(function(t,r){return n("v-list-tile",{key:r,class:{frozenGood:e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().precision>=.5,frozenBad:e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().precision<.5,selected:t===e.selectedPattern}},[n("v-list-tile-content",{domProps:{textContent:e._s(e.currentTable[t].toString())},on:{click:function(n){return e.choosePattern(t)}}}),n("v-list-tile-action",[e.showTargetAndScoreTable?e._e():n("v-select",{attrs:{items:e.siblingOntologyTypes,label:"Target","browser-autocomplete":"off",value:e.currentTable[t].getLocalLabel()},on:{change:function(n){return e.changeFocusType(t,n)}}})],1),!e.currentTable[t].getOriginalScoreTable().frozen||e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().precision>=.5?n("v-list-tile-avatar",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.frozen(t,!1)}}},[n("v-icon",[e._v("remove")])],1)],1):e._e(),!e.currentTable[t].getOriginalScoreTable().frozen||e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().precision<.5?n("v-list-tile-avatar",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.frozen(t,!0)}}},[n("v-icon",[e._v("add")])],1)],1):e._e(),e.currentTable[t].getOriginalScoreTable().frozen?n("v-list-tile-avatar",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.unfrozen(t)}}},[n("v-icon",[e._v("clear")])],1)],1):e._e()],1)})),1),e.targetName.length>0&&e.showTargetAndScoreTable?n("div",{staticClass:"scoreTableButtonGroup"},[n("v-btn",{on:{click:function(t){return e.toggleAddNew()}}},[e._v("Add New")]),n("v-btn",{on:{click:function(t){return e.proposeNewLearnitPatterns()}}},[e._v("Propose")]),n("v-btn",{on:{click:function(t){return e.getSimilarLearnitPatterns()}}},[e._v("Similar")])],1):e._e(),e.targetName.length>0&&!e.showTargetAndScoreTable?n("div",{staticClass:"scoreTableButtonGroup"},[n("v-btn",{on:{click:function(t){return e.finishAddPattern()}}},[e._v("Save and Back")])],1):e._e()],1)},W=[],q=(n("99af"),n("4de4"),n("fb6a"),n("b0c0"),n("4fad"),n("2909")),Z=n("3835"),Y={name:"LearnitPatternPanel",store:N,data:function(){return{showTargetAndScoreTable:!0,showAddPanel:!1,patternKeyword:"",patternCandidates:{},sortingMethod:"frequency",sortingReverse:!0,fullTextSearchKey:""}},methods:{unfrozen:function(e){var t=this;if(this.showTargetAndScoreTable){var n=this.currentTable[e],r=!1,a=!1;this.$store.dispatch("markPattern",{pattern:n,isFrozen:r,isGood:a})}else{var i=this.currentTable[e],o=!1,s=!1;f.markPattern(i.getLocalLabel(),i.toIDString(),o,s).then((function(n){var r=t.currentTable[e].getOriginalScoreTable();r.frozen=!1}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)})}))}},frozen:function(e,t){var n=this;if(this.showTargetAndScoreTable){var r=this.currentTable[e],a=!0;this.$store.dispatch("markPattern",{pattern:r,isFrozen:a,isGood:t})}else{var i=this.currentTable[e],o=!0;f.markPattern(i.getLocalLabel(),i.toIDString(),o,t).then((function(r){var a=n.currentTable[e].getOriginalScoreTable();a.frozen=!0,a.precision=t?.95:.05}),(function(e){n.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)})}))}},toggleAddNew:function(){this.showTargetAndScoreTable=!1,this.showAddPanel=!0},searchPatternsByKeywords:function(){var e=this;f.getPatternsByKeyword(this.targetName,this.patternKeyword,d.MaxNumberOfPatterns,this.fullTextSearchKey,this.sortingMethod).then((function(t){var n={},r=0,a=!0,i=!1,o=void 0;try{for(var s,l=t.data[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,u={frozen:!1};u[e.sortingMethod]=e.sortingReverse?-r:r;var g=M.normalizedPattern.fromJson(c,u);g.setLocalLabel(e.targetName),n[g.key]=g,r++}}catch(d){i=!0,o=d}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}e.patternCandidates=n}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},finishAddPattern:function(){this.$store.dispatch("loadTargetAndScoreTable",{targetName:this.targetName}),this.showAddPanel=!1,this.showTargetAndScoreTable=!0,this.patternCandidates={},this.patternKeyword=""},choosePattern:function(e){this.$store.commit("updateMatchInfoDisplay",{type:M.normalizedPattern.name,key:e,learnitObservationObj:this.currentTable[e]})},proposeNewLearnitPatterns:function(){var e=this;this.patternCandidates={},this.showTargetAndScoreTable=!1,this.showAddPanel=!1,f.proposeLearnitPatterns(this.targetName).then((function(t){e.patternCandidates=M.loadPatternScoreTable(t.data.data);for(var n=0,r=Object.entries(e.patternCandidates);n<r.length;n++){var a=Object(Z["a"])(r[n],2),i=(a[0],a[1]);i.setLocalLabel(e.targetName)}}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},getSimilarLearnitPatterns:function(){var e=this;this.patternCandidates={},this.showTargetAndScoreTable=!1,this.showAddPanel=!1,f.getSimilarLearnitPatterns(this.targetName).then((function(t){e.patternCandidates=M.loadPatternScoreTable(t.data.data);for(var n=0,r=Object.entries(e.patternCandidates);n<r.length;n++){var a=Object(Z["a"])(r[n],2),i=(a[0],a[1]);i.setLocalLabel(e.targetName)}}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},changeFocusType:function(e,t){var n=this.currentTable[e];n.setLocalLabel(t)}},props:{},watch:{targetName:function(e,t){t!==e&&(this.showTargetAndScoreTable=!0,this.showAddPanel=!1,this.patternKeyword="",this.patternCandidates={})}},components:{Splitpanes:D["Splitpanes"],Pane:D["Pane"]},computed:{targetName:function(){return this.$store.getters.targetName},numberOfPattern:function(){return Object.keys(this.currentTable).length},numberOfFrozenPattern:function(){var e=Object.keys(this.currentTable),t=e.filter(M.filterPatternList(!0,!0,this.currentTable)),n=e.filter(M.filterPatternList(!0,!1,this.currentTable));return[].concat(t.slice(0,d.MaxNumberOfPatterns),n.slice(0,d.MaxNumberOfPatterns)).length},patternList:function(){var e=Object.keys(this.currentTable),t=e.filter(M.filterPatternList(!0,!0,this.currentTable)).sort(M.sortPatternList("undefined"===typeof this.sortingMethod?"precision":this.sortingMethod,this.sortingReverse,this.currentTable)),n=e.filter(M.filterPatternList(!1,null,this.currentTable)).sort(M.sortPatternList("undefined"===typeof this.sortingMethod?"precision":this.sortingMethod,this.sortingReverse,this.currentTable)),r=e.filter(M.filterPatternList(!0,!1,this.currentTable)).sort(M.sortPatternList("undefined"===typeof this.sortingMethod?"precision":this.sortingMethod,this.sortingReverse,this.currentTable));return[].concat(t.slice(0,d.MaxNumberOfPatterns),n.slice(0,d.MaxNumberOfPatterns),r.slice(0,d.MaxNumberOfPatterns))},currentTable:function(){return this.showTargetAndScoreTable?this.$store.getters.patternScoreTable:this.patternCandidates},selectedPattern:function(){return this.$store.getters.targetAndScoreTableChosenItem.type===M.normalizedPattern.name?this.$store.getters.targetAndScoreTableChosenItem.key:null},sortingMethodCandidates:function(){return d.patternScoreTableSortableKeys},siblingOntologyTypes:function(){var e=[];return e.push.apply(e,Object(q["a"])(this.$store.getters.siblingOntologyTypes)),e}}},Q=Y,X=Object(z["a"])(Q,H,W,!1,null,"7c8c3811",null),ee=X.exports,te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"learnitListcard"},[n("v-card-title",{staticClass:"subheading",attrs:{"primary-title":""}},[e._v(" Pairs ( "+e._s(e.numberOfFrozenSeed)+"/"+e._s(e.numberOfSeed)+" ) "),n("v-spacer"),n("v-select",{attrs:{items:e.sortingMethodCandidates,label:"Sorting Method",disabled:e.targetName.length<1,"item-text":"uitext","item-value":"backendtext"},model:{value:e.sortingMethod,callback:function(t){e.sortingMethod=t},expression:"sortingMethod"}}),n("v-switch",{attrs:{label:"Reverse",disabled:e.targetName.length<1},model:{value:e.sortingReverse,callback:function(t){e.sortingReverse=t},expression:"sortingReverse"}})],1),e.showAddPanel?n("div",{staticStyle:{display:"flex"}},[n("v-text-field",{staticStyle:{flex:"2"},attrs:{label:"Slot0"},model:{value:e.seedSlot0Keyword,callback:function(t){e.seedSlot0Keyword=t},expression:"seedSlot0Keyword"}}),n("v-text-field",{staticStyle:{flex:"2"},attrs:{label:"Slot1"},model:{value:e.seedSlot1Keyword,callback:function(t){e.seedSlot1Keyword=t},expression:"seedSlot1Keyword"}}),n("v-text-field",{staticStyle:{flex:"1"},attrs:{label:"FullTextSearchKey"},model:{value:e.fullTextSearchKey,callback:function(t){e.fullTextSearchKey=t},expression:"fullTextSearchKey"}}),n("v-btn",{staticStyle:{flex:"2"},on:{click:function(t){return e.searchSeedsBySlots()}}},[e._v("Search")])],1):e._e(),n("v-list",{staticStyle:{"overflow-y":"scroll","flex-basis":"70%"}},e._l(e.seedList,(function(t,r){return n("v-list-tile",{key:r,class:{frozenGood:e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().score>=.5,frozenBad:e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().score<.5,selected:t===e.selectedSeed}},[n("v-list-tile-content",{on:{click:function(n){return e.chooseSeed(t)}}},[e._v(e._s(e.currentTable[t].toString()))]),n("v-list-tile-action",[e.showTargetAndScoreTable?e._e():n("v-select",{attrs:{items:e.siblingOntologyTypes,label:"Target","browser-autocomplete":"off",value:e.currentTable[t].getLocalLabel()},on:{change:function(n){return e.changeFocusType(t,n)}}})],1),!e.currentTable[t].getOriginalScoreTable().frozen||e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().score>=.5?n("v-list-tile-avatar",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.frozen(t,!1)}}},[n("v-icon",[e._v("remove")])],1)],1):e._e(),!e.currentTable[t].getOriginalScoreTable().frozen||e.currentTable[t].getOriginalScoreTable().frozen&&e.currentTable[t].getOriginalScoreTable().score<.5?n("v-list-tile-avatar",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.frozen(t,!0)}}},[n("v-icon",[e._v("add")])],1)],1):e._e(),e.currentTable[t].getOriginalScoreTable().frozen?n("v-list-tile-avatar",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.unfrozen(t)}}},[n("v-icon",[e._v("clear")])],1)],1):e._e()],1)})),1),e.targetName.length>0&&e.showTargetAndScoreTable?n("div",{staticClass:"scoreTableButtonGroup"},[n("v-btn",{on:{click:function(t){return e.toggleAddNew()}}},[e._v("Add New")]),n("v-btn",{on:{click:function(t){return e.proposeNewSeeds()}}},[e._v("Propose")]),n("v-btn",{on:{click:function(t){return e.getSimilarSeeds()}}},[e._v("Similar")])],1):e._e(),e.targetName.length>0&&!e.showTargetAndScoreTable?n("div",{staticClass:"scoreTableButtonGroup"},[n("v-btn",{on:{click:function(t){return e.finishAddSeed()}}},[e._v("Save and Back")])],1):e._e()],1)},ne=[],re={name:"SeedPanel",store:N,data:function(){return{showTargetAndScoreTable:!0,seedCandidates:{},showAddPanel:!1,seedSlot0Keyword:"",seedSlot1Keyword:"",sortingMethod:"frequency",sortingReverse:!0,fullTextSearchKey:""}},methods:{chooseSeed:function(e){this.$store.commit("updateMatchInfoDisplay",{type:k.Seed.name,key:e,learnitObservationObj:this.currentTable[e]})},unfrozen:function(e){var t=this;if(this.showTargetAndScoreTable){var n=this.currentTable[e],r=!1,a=!1;this.$store.dispatch("markSeed",{seed:n,isFrozen:r,isGood:a})}else{var i=this.currentTable[e],o=!1,s=!1;f.markSeed(i.getLocalLabel(),i.getOriginalObjJson(),o,s).then((function(n){var r=t.currentTable[e].getOriginalScoreTable();r.frozen=!1}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)})}))}},frozen:function(e,t){var n=this;if(this.showTargetAndScoreTable){var r=this.currentTable[e],a=!0;this.$store.dispatch("markSeed",{seed:r,isFrozen:a,isGood:t})}else{var i=this.currentTable[e],o=!0;f.markSeed(i.getLocalLabel(),i.getOriginalObjJson(),o,t).then((function(r){var a=n.currentTable[e].getOriginalScoreTable();a.frozen=!0,a.score=t?.95:.05}),(function(e){n.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)})}))}},toggleAddNew:function(){this.showTargetAndScoreTable=!1,this.showAddPanel=!0},finishAddSeed:function(){this.$store.dispatch("loadTargetAndScoreTable",{targetName:this.targetName}),this.showAddPanel=!1,this.showTargetAndScoreTable=!0,this.seedCandidates={},this.seedSlot0Keyword="",this.seedSlot1Keyword=""},searchSeedsBySlots:function(){var e=this;f.getSeedsBySlot(this.targetName,this.seedSlot0Keyword,this.seedSlot1Keyword,d.MaxNumberOfSeeds,this.fullTextSearchKey,this.sortingMethod).then((function(t){var n={},r=0,a=!0,i=!1,o=void 0;try{for(var s,l=t.data[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,u={frozen:!1};u[e.sortingMethod]=e.sortingReverse?-r:r;var g=k.Seed.fromJson(c,u);g.setLocalLabel(e.targetName),n[g.key]=g,r++}}catch(d){i=!0,o=d}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}e.seedCandidates=n}),(function(e){}))},proposeNewSeeds:function(){var e=this;this.seedCandidates={},this.showTargetAndScoreTable=!1,this.showAddPanel=!1,f.proposeSeeds(this.targetName).then((function(t){e.seedCandidates=k.loadSeedScoreTable(t.data.data);for(var n=0,r=Object.entries(e.seedCandidates);n<r.length;n++){var a=Object(Z["a"])(r[n],2),i=(a[0],a[1]);i.setLocalLabel(e.targetName)}}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},getSimilarSeeds:function(){var e=this;this.seedCandidates={},this.showTargetAndScoreTable=!1,this.showAddPanel=!1,f.getSimilarSeeds(this.targetName).then((function(t){e.seedCandidates=k.loadSeedScoreTable(t.data.data);for(var n=0,r=Object.entries(e.seedCandidates);n<r.length;n++){var a=Object(Z["a"])(r[n],2),i=(a[0],a[1]);i.setLocalLabel(e.targetName)}}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},changeFocusType:function(e,t){var n=this.currentTable[e];n.setLocalLabel(t)}},props:{},components:{Splitpanes:D["Splitpanes"],Pane:D["Pane"]},computed:{targetName:function(){return this.$store.getters.targetName},seedList:function(){var e=Object.keys(this.currentTable),t=e.filter(k.filterSeedList(!0,!0,this.currentTable)).sort(k.sortSeedList("undefined"===typeof this.sortingMethod?"score":this.sortingMethod,this.sortingReverse,this.currentTable)),n=e.filter(k.filterSeedList(!1,null,this.currentTable)).sort(k.sortSeedList("undefined"===typeof this.sortingMethod?"score":this.sortingMethod,this.sortingReverse,this.currentTable)),r=e.filter(k.filterSeedList(!0,!1,this.currentTable)).sort(k.sortSeedList("undefined"===typeof this.sortingMethod?"score":this.sortingMethod,this.sortingReverse,this.currentTable));return[].concat(t.slice(0,d.MaxNumberOfSeeds),n.slice(0,d.MaxNumberOfSeeds),r.slice(0,d.MaxNumberOfSeeds))},currentTable:function(){return this.showTargetAndScoreTable?this.$store.getters.seedScoreTable:this.seedCandidates},selectedSeed:function(){return this.$store.getters.targetAndScoreTableChosenItem.type===k.Seed.name?this.$store.getters.targetAndScoreTableChosenItem.key:null},numberOfFrozenSeed:function(){var e=Object.keys(this.currentTable),t=e.filter(k.filterSeedList(!0,!0,this.currentTable)),n=e.filter(k.filterSeedList(!0,!1,this.currentTable));return[].concat(t.slice(0,d.MaxNumberOfSeeds),n.slice(0,d.MaxNumberOfSeeds)).length},numberOfSeed:function(){return Object.keys(this.currentTable).length},sortingMethodCandidates:function(){return d.seedScoreTableSortableKeys},siblingOntologyTypes:function(){var e=[];return e.push.apply(e,Object(q["a"])(this.$store.getters.siblingOntologyTypes)),e}},watch:{targetName:function(e,t){e!==t&&(this.showAddPanel=!1,this.showTargetAndScoreTable=!0,this.seedCandidates={},this.seedSlot0Keyword="",this.seedSlot1Keyword="")}}},ae=re,ie=Object(z["a"])(ae,te,ne,!1,null,"29e3759f",null),oe=ie.exports,se={name:"TargetAndScoreTable",data:function(){return{}},methods:{},components:{LearnitPatternPanel:ee,SeedPanel:oe,Splitpanes:D["Splitpanes"],Pane:D["Pane"]},created:function(){},props:{},computed:{}},le=se,ce=(n("10f4"),Object(z["a"])(le,V,G,!1,null,null,null)),ue=ce.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"learnitListcard"},[n("v-snackbar",{attrs:{bottom:"",right:"","multi-line":"",timeout:e.wordnetbartimeout},model:{value:e.wordnetbarshow,callback:function(t){e.wordnetbarshow=t},expression:"wordnetbarshow"}},[e._v(" "+e._s(e.wordnetbartext)+" "),n("v-btn",{attrs:{color:"pink",flat:""},on:{click:function(t){e.wordnetbarshow=!1}}},[e._v("Close")])],1),n("v-card-title",{staticClass:"subheading",attrs:{"primary-title":""}},[e._v("Instances ( "+e._s(e.numberOfFrozenInstance)+"/"+e._s(e.numberOfInstances)+" )")]),n("div",{staticStyle:{"overflow-y":"scroll","flex-basis":"85%","flex-grow":"1"}},[n("v-switch",{attrs:{label:"showAlignment"},model:{value:e.showAlignment,callback:function(t){e.showAlignment=t},expression:"showAlignment"}}),e.inOTHERTarget?n("v-select",{attrs:{items:e.siblingOntologyTypes,label:"Mark all LearnIt Observation Instances","browser-autocomplete":"off"},on:{change:function(t){return e.changeInstanceTypeInBatch(t)}}}):e._e(),!e.inOTHERTarget&&e.instanceList.length>0?n("div",[n("span",[e._v("Mark Instance in batch")]),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.markInstanceInBatch("bad")}}},[n("v-icon",[e._v("remove")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.markInstanceInBatch("good")}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.unMarkInstanceInBatch()}}},[n("v-icon",[e._v("clear")])],1)],1):e._e(),n("div",{staticStyle:{height:"45px","border-bottom":"solid"}}),e._l(e.instanceList,(function(t,r){return n("div",{key:r},[e.showAlignment?n("TokenAlignmentGraph",{attrs:{matchInfoDisplay:e.instances[t].matchInfoDisplay,callbackForHover:e.lookupDictionary}}):e._e(),e._l(e.instances[t].matchInfoDisplay.langDisplays,(function(t,r){return n("div",{key:r},[n("br"),n("span",[n("b",{domProps:{textContent:e._s(t.language)}})]),n("br"),n("p",{staticStyle:{"margin-bottom":"0"}},e._l(t.sentenceTokens,(function(r,a){return n("span",{key:a},[n("font",{class:{slot0:t.instance&&t.instance.slot0Start<=a&&t.instance.slot0End>=a,slot1:t.instance&&t.instance.slot1Start<=a&&t.instance.slot1End>=a}},[e._v(e._s(r))]),n("font",{domProps:{textContent:e._s(e.space_char)}})],1)})),0),n("span",[e._v("( "),t.seed?n("span",{staticClass:"slot0"},[e._v(e._s(t.seed.slot0.text[0]))]):e._e(),e._v(", "),t.seed?n("span",{staticClass:"slot1"},[e._v(e._s(t.seed.slot1.text[0]))]):e._e(),e._v(")")])])})),n("v-spacer"),n("v-flex",{class:{frozenGood:e.instances[t].relationType===e.targetName&&e.instances[t].annotation===e.constants.instanceFrozenGoodStr,frozenBad:e.instances[t].relationType===e.targetName&&e.instances[t].annotation===e.constants.instanceFrozenBadStr}},[e.inOTHERTarget?e._e():n("div",[n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.markInstance(t,"bad")}}},[n("v-icon",[e._v("remove")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.markInstance(t,"good")}}},[n("v-icon",[e._v("add")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(n){return e.unMarkInstance(t)}}},[n("v-icon",[e._v("clear")])],1)],1),e.inOTHERTarget?n("v-select",{attrs:{items:e.siblingOntologyTypes,label:"Choose Type","browser-autocomplete":"off",value:e.instances[t].relationType},on:{change:function(n){return e.changeInstanceType(t,n)}}}):e._e()],1)],2)}))],2)],1)},de=[],fe=(n("caad"),n("07ac"),n("2532"),{loadInstanceIdentifierTable:function(e){for(var t={},n=e.InstanceIdentifierSet.length,r=0;r<n;++r)t[JSON.stringify(e.InstanceIdentifierSet[r])]={instanceIdentifier:e.InstanceIdentifierSet[r],matchInfoDisplay:JSON.parse(e.HTMLStringSet[r]),annotation:e.AnnotationSet[r],relationType:e.RelationNameSet[r]};return t}}),he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"95%","overflow-x":"scroll"}},[n("svg",{attrs:{width:e.width,height:e.height}},[n("g",[n("g",{staticClass:"nodes"},[e._l(e.computedNodes,(function(t,r){return n("g",{key:t.nid,staticClass:"unit"},[n("rect",{class:{node:!0,active:t.highlighted},attrs:{x:t.x,y:t.y,width:t.boxWidth,height:t.boxHeight,rx:"6",ry:"6"},on:{mouseover:function(n){return e.highlightAllConnectedNodesAndEdges(t,!0)},mouseout:function(n){return e.highlightAllConnectedNodesAndEdges(t,!1)}}}),n("text",{staticClass:"label",attrs:{x:t.x+14,y:t.y+15}},[e._v(e._s(t.name))])])})),e._l(e.computedEdges,(function(e,t){return n("path",{key:e.eid,class:{link:!e.highlighted,activelink:e.highlighted},attrs:{d:e.d}})}))],2)])])])},be=[],pe=(n("4160"),n("159b"),{name:"TokenAlignmentGraph",data:function(){return{width:800,height:150,boxWidth:120,boxHeight:20,gap:{width:12,height:80},margin:{top:16,right:16,bottom:16,left:16},nodes:[],edges:[]}},props:{matchInfoDisplay:Object,callbackForHover:Function},components:{},mounted:function(){for(var e=this,t=e.matchInfoDisplay,n=t.primaryLanguage,r=[],a=0,i=Object.keys(t.langDisplays);a<i.length;a++){var o=i[a];o!==n&&r.push(o)}var s=r[0],l=t.langDisplays[n].sentenceTokens,c=t.langDisplays[s].sentenceTokens,u=Math.max(l.length,c.length);e.width=u*e.boxWidth+e.gap.width*(u-1)+e.margin.left+e.margin.right+1;var g=t.tokenAlignmentTable.table[n][s];e.nodes=[],l.forEach((function(t,n){e.nodes.push({lvl:0,name:t,highlighted:!1,aux:{},nid:"src_"+n})})),c.forEach((function(t,n){e.nodes.push({lvl:1,name:t,highlighted:!1,aux:{},nid:"dst_"+n})})),e.edges=[];for(var d=0,f=Object.entries(g);d<f.length;d++){var h=Object(Z["a"])(f[d],2),b=h[0],p=h[1],v=!0,y=!1,m=void 0;try{for(var T,S=p[Symbol.iterator]();!(v=(T=S.next()).done);v=!0){var O=T.value;e.edges.push({source:"src_"+b,target:"dst_"+O,highlighted:!1,aux:{}})}}catch(_){y=!0,m=_}finally{try{v||null==S.return||S.return()}finally{if(y)throw m}}}},methods:{diagonal:function(e){return"M"+e.source.y+","+e.source.x+"C"+(e.source.y+e.target.y)/2+","+e.source.x+" "+(e.source.y+e.target.y)/2+","+e.target.x+" "+e.target.y+","+e.target.x},getAllConnectedNodes:function(e,t,n){if(!t.includes(e)){t.push(e);var r=!0,a=!1,i=void 0;try{for(var o,s=e.connectedEdges[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.source===e&&t.push(l.target),l.target===e&&t.push(l.source),n.push(l)}}catch(c){a=!0,i=c}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}},highlightAllConnectedNodesAndEdges:function(e,t){var n=this,r=[],a=[];n.getAllConnectedNodes(e,r,a);for(var i=0,o=r;i<o.length;i++){var s=o[i];s.aux.highlighted=t}for(var l=0,c=a;l<c.length;l++){var u=c[l];u.aux.highlighted=t}t&&n.callbackForHover(e)}},computed:{computedNodes:function(){var e=this,t=[],n=[];e.nodes.forEach((function(e){t[e.lvl]=0,n[e.lvl]=0}));var r=0;e.nodes.forEach((function(e){n[e.lvl]++,r=Math.max(n[e.lvl],r)}));var a=[];return e.nodes.forEach((function(i,o){var s={x:e.margin.left+(e.boxWidth+e.gap.width)*(r/n[i.lvl])*t[i.lvl],y:e.margin.top+i.lvl*(e.boxHeight+e.gap.height),name:i.name,boxWidth:e.boxWidth,boxHeight:e.boxHeight,nid:i.nid,aux:i,connectedEdges:[],highlighted:i.highlighted};a.push(s),t[i.lvl]++})),a},computedEdges:function(){var e=this,t={},n=!0,r=!1,a=void 0;try{for(var i,o=e.computedNodes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;t[s["nid"]]=s}}catch(c){r=!0,a=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}var l=[];return e.edges.forEach((function(n,r){var a=t[n.source],i=t[n.target],o={x:i.y,y:i.x+.5*i.boxWidth},s={x:a.y+a.boxHeight,y:a.x+.5*a.boxWidth},c={eid:"edge_"+r,d:e.diagonal({source:s,target:o,aux:n.aux}),source:a,target:i,highlighted:n.highlighted,aux:n};l.push(c),a.connectedEdges.push(c),i.connectedEdges.push(c)})),l}}}),ve=pe,ye=(n("ceb4"),Object(z["a"])(ve,he,be,!1,null,"ebc1a788",null)),me=ye.exports,Te={name:"InstancePanel",store:N,components:{TokenAlignmentGraph:me,Pane:D["Pane"],Splitpanes:D["Splitpanes"]},data:function(){return{instances:{},scoreTable:{},showAlignment:!1,wordnetbarshow:!1,wordnetbartimeout:6e3,wordnetbartext:"Hello World",space_char:" "}},methods:{markInstance:function(e,t){var n=this,r=this.instances[e],a=r.instanceIdentifier,i="good"===t?d.instanceFrozenGoodStr:d.instanceFrozenBadStr;f.markInstance(this.targetName,a,t).then((function(e){r.annotation=i}),(function(e){n.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},unMarkInstance:function(e){var t=this,n=this.instances[e],r=n.instanceIdentifier;f.unMarkInstance(this.targetName,r).then((function(e){n.annotation=d.instanceNoFrozenStr}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},changeInstanceType:function(e,t){var n=this,r=t,a=this.instances[e],i=a.instanceIdentifier;f.markInstanceFromOther(r,i).then((function(e){a.relationType=r,a.annotation=d.instanceFrozenGoodStr}),(function(e){n.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},changeInstanceTypeInBatch:function(e){var t=this,n=e,r=this.targetAndScoreTableChosenItem.learnitObservationObj;r instanceof k.Seed?f.markInstanceBySeedFromOther(n,r.getOriginalObjJson()).then((function(e){t.loadInstancesFromSeed(r)}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)})):r instanceof M.normalizedPattern&&f.markInstanceByPatternFromOther(n,r.getOriginalObjJson().toIDString).then((function(e){t.loadInstancesFromLearnitPatterns(r)}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},loadInstancesFromSeed:function(e){var t=this;f.getSeedInstances(this.targetName,e.getOriginalObjJson(),this.inOTHERTarget?d.MaxNumberOfInstanceFromOTHER:d.MaxNumberOfInstance,this.inOTHERTarget).then((function(n){var r=fe.loadInstanceIdentifierTable(n.data);t.instances=r;for(var a=0,i=Object.entries(e.getOriginalScoreTable());a<i.length;a++){var o=Object(Z["a"])(i[a],2),s=o[0],l=o[1];d.seedScoreTableDisplayableKeys.includes(s)&&(t.scoreTable[s]=l)}}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},loadInstancesFromLearnitPatterns:function(e){var t=this;f.getPatternInstances(this.targetName,e.getOriginalObjJson().toIDString,this.inOTHERTarget?d.MaxNumberOfInstanceFromOTHER:d.MaxNumberOfInstance,this.inOTHERTarget).then((function(n){var r=fe.loadInstanceIdentifierTable(n.data);t.instances=r;for(var a=0,i=Object.entries(e.getOriginalScoreTable());a<i.length;a++){var o=Object(Z["a"])(i[a],2),s=o[0],l=o[1];d.patternScoreTableDisplayableKeys.includes(s)&&(t.scoreTable[s]=l)}}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},markInstanceInBatch:function(e){for(var t=this,n=function(){var n=a[r],i=n.instanceIdentifier,o="good"===e?d.instanceFrozenGoodStr:d.instanceFrozenBadStr;f.markInstance(t.targetName,i,e).then((function(e){n.annotation=o}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},r=0,a=Object.values(this.instances);r<a.length;r++)n()},unMarkInstanceInBatch:function(){for(var e=this,t=function(){var t=r[n],a=t.instanceIdentifier;f.unMarkInstance(e.targetName,a).then((function(e){t.annotation=d.instanceNoFrozenStr}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},n=0,r=Object.values(this.instances);n<r.length;n++)t()},lookupDictionary:function(e){var t=this,n=e["name"];f.dictionaryLookup(n).then((function(e){t.wordnetbarshow=!0,t.wordnetbartext={src:n,dst:e.data}}),(function(e){console.log(e)}))}},created:function(){},mounted:function(){},props:{},computed:{instanceList:function(){return Object.keys(this.instances)},targetAndScoreTableChosenItem:function(){return this.$store.getters.targetAndScoreTableChosenItem},numberOfInstances:function(){return this.instanceList.length},numberOfFrozenInstance:function(){return this.instanceList.length},constants:function(){return d},siblingOntologyTypes:function(){var e=[];return e.push.apply(e,Object(q["a"])(this.$store.getters.siblingOntologyTypes)),e},targetName:function(){return this.$store.getters.targetName},inOTHERTarget:function(){return this.targetName===d.OTHERTargetName}},watch:{targetName:function(e,t){e!==t&&(this.scoreTable={},this.instances={})},targetAndScoreTableChosenItem:function(e,t){if(null!==e.type){e.type;var n=e.learnitObservationObj;this.scoreTable={},this.instances={},n instanceof k.Seed?(this.$store.commit("changePendingMessage",{pendingMessage:"We're getting instances."}),this.loadInstancesFromSeed(n)):n instanceof M.normalizedPattern&&(this.$store.commit("changePendingMessage",{pendingMessage:"We're getting instances."}),this.loadInstancesFromLearnitPatterns(n))}}}},Se=Te,Oe=Object(z["a"])(Se,ge,de,!1,null,"20900c10",null),_e=Oe.exports,ke={name:"LearnItMain",store:N,methods:{openOntologyPanel:function(){this.$store.commit("toggleDisplayOntologyPanel")},saveProgress:function(){var e=this;f.saveProgress().then((function(t){e.$store.commit("changePendingMessage",{pendingMessage:"Your extractors have been saved."})}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},generateVisualization:function(){var e=this;f.generateVisualization().then((function(t){e.$store.commit("changePendingMessage",{pendingMessage:t.data})}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},loadTargetAndScoreTable:function(){this.$store.dispatch("loadTargetAndScoreTable",{targetName:this.$store.getters.targetName})},clearUnaccept:function(){var e=this;f.clearUnknown(this.$store.getters.targetName).then((function(t){e.loadTargetAndScoreTable()}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},clearAll:function(){var e=this;f.clearAll(this.$store.getters.targetName).then((function(t){e.loadTargetAndScoreTable()}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))}},components:{OntologyView:J,TargetAndScoreTable:ue,InstancePanel:_e,Splitpanes:D["Splitpanes"],Pane:D["Pane"]},data:function(){return{}},computed:{targetName:function(){return this.$store.getters.targetName}},created:function(){}},Ee=ke,xe=(n("5a77"),Object(z["a"])(Ee,o,s,!1,null,null,null)),we=xe.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"learnitListcard"},[n("v-toolbar",[n("v-toolbar-title",[e._v("LearnIt Instance Annotation View")]),n("span",{staticClass:"title align-content-center pl-4 pr-2"},[e._v(e._s(e.targetName))]),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:""},on:{click:function(t){return e.returnToMain()}}},[e._v("Return To Main")]),n("v-btn",{attrs:{flat:""},on:{click:function(t){return e.markAllUnFrozenToNA()}}},[e._v(" Mark All UnFrozen To NA ")])],1),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{flat:""},on:{click:function(t){return e.saveProgress()}}},[e._v("Save Progress")])],1)],1),n("div",{staticStyle:{"overflow-y":"scroll","flex-basis":"85%","flex-grow":"1"}},e._l(e.instanceList,(function(t,r){return n("div",{key:r},[e._l(e.instances[t].matchInfoDisplay.langDisplays,(function(t,r){return n("div",{key:r},[n("br"),n("span",[n("b",{domProps:{textContent:e._s(t.language)}})]),n("br"),n("p",{staticStyle:{"margin-bottom":"0"}},e._l(t.sentenceTokens,(function(r,a){return n("span",{key:a},[n("font",{class:{slot0:t.instance&&t.instance.slot0Start<=a&&t.instance.slot0End>=a,slot1:t.instance&&t.instance.slot1Start<=a&&t.instance.slot1End>=a}},[e._v(e._s(r))]),n("font",{domProps:{textContent:e._s(e.space_char)}})],1)})),0),n("span",[e._v("( "),t.seed?n("span",{staticClass:"slot0"},[e._v(e._s(t.seed.slot0.text[0]))]):e._e(),e._v(", "),t.seed?n("span",{staticClass:"slot1"},[e._v(e._s(t.seed.slot1.text[0]))]):e._e(),e._v(")")])])})),n("v-spacer"),n("v-flex",{class:{frozenGood:e.instances[t].annotation===e.constants.instanceFrozenGoodStr,frozenBad:e.instances[t].annotation===e.constants.instanceFrozenBadStr}},[n("v-select",{attrs:{items:e.siblingOntologyTypes,label:"Choose Type","browser-autocomplete":"off",value:e.instances[t].relationType},on:{input:function(n){return e.changeInstanceType(t,n)}}})],1)],2)})),0),n("v-pagination",{attrs:{length:e.numberOfPagesInLabelMapping},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},Pe=[],Ne={name:"LabeledMappingsView",store:N,data:function(){return{instances:{},scoreTable:{},currentPage:1,space_char:" "}},methods:{changeInstanceType:function(e,t){var n=this,r=t,a=this.instances[e],i=a.instanceIdentifier;f.markInstanceFromLabeledMappings(r,i).then((function(e){a.relationType=r,a.annotation=e.data}),(function(e){n.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},loadInstancesFromLabelMappings:function(e){var t=this;this.$store.commit("changePendingMessage",{pendingMessage:"We're getting instances."}),f.getLabeledMappingInstances(this.targetName,!1,e-1).then((function(e){var n=fe.loadInstanceIdentifierTable(e.data);t.instances=n}),(function(e){t.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(e)}),console.log(e)}))},saveProgress:function(){var e=this;f.saveProgress().then((function(t){e.$store.commit("changePendingMessage",{pendingMessage:"Your extractors have been saved."})}),(function(t){e.$store.commit("changeErrorMessage",{errorMessage:JSON.stringify(t)}),console.log(t)}))},returnToMain:function(){this.$router.replace({name:"LearnItMain"})},markAllUnFrozenToNA:function(){for(var e=0,t=Object.entries(this.instances);e<t.length;e++){var n=Object(Z["a"])(t[e],2),r=n[0],a=n[1];a.relationType===d.trueNegativeLabel&&a.annotation===d.instanceNoFrozenStr&&this.changeInstanceType(r,d.trueNegativeLabel)}}},created:function(){},mounted:function(){this.loadInstancesFromLabelMappings(this.currentPage)},props:{},computed:{instanceList:function(){return Object.keys(this.instances)},constants:function(){return d},targetName:function(){return this.$store.getters.targetName},siblingOntologyTypes:function(){var e=[];e.push({text:"0-"+d.trueNegativeLabel,value:d.trueNegativeLabel});var t=1,n=!0,r=!1,a=void 0;try{for(var i,o=this.$store.getters.siblingOntologyTypes[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;e.push({text:t+"-"+s,value:s}),t++}}catch(l){r=!0,a=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return e},numberOfPagesInLabelMapping:function(){return this.$store.getters.numberOfPagesInLabelMapping}},watch:{currentPage:function(e,t){e!==t&&this.loadInstancesFromLabelMappings(e)}}},Le=Ne,Ie=(n("647a"),Object(z["a"])(Le,Me,Pe,!1,null,"5cb578a2",null)),Ae=Ie.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rootContainer learnitListcard"},[n("splitpanes",{staticStyle:{display:"flex","flex-direction":"column",height:"100%",width:"100%"},attrs:{horizontal:""}},[n("pane",{staticClass:"learnitListcard",staticStyle:{display:"flex","flex-direction":"column"}},[n("v-chart",{staticStyle:{"flex-grow":"1","flex-shrink":"1",width:"100%","padding-bottom":"15px"},attrs:{options:e.echartOption,autoresize:""},on:{click:e.hoverPoint}})],1),n("pane",{staticClass:"learnitListcard"},[n("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%"}},[n("v-data-table",{staticStyle:{height:"100%","overflow-y":"auto"},attrs:{headers:e.datatableHeader,items:e.eventFramesAggr,"calculate-widths":""},on:{"click:row":e.getInstances},scopedSlots:e._u([{key:"items",fn:function(t){return e._l(e.datatableHeader,(function(r,a){return n("td",{key:a,on:{click:function(n){return e.getInstances(t.item)}}},[e._v(e._s(t.item[r["value"]]))])}))}}])})],1)]),n("pane",{staticClass:"learnitListcard"},[n("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%","overflow-y":"scroll"}},e._l(e.instanceEventFrames,(function(t,r){return n("p",{key:r},e._l(e.DocIdToSentIdToTokens[t.docId][t.sentIdx],(function(r,a){return n("span",{key:a},[n("font",{class:e.markingTriggerOrArgument(t,a)},[e._v(e._s(r))]),n("font",{domProps:{textContent:e._s(e.space_char)}})],1)})),0)})),0)])],1)],1)},Re=[],$e=(n("d81d"),n("a434"),n("9ca8")),ze=(n("313e"),{name:"TimelineMain",store:N,data:function(){return{eventFramesAggr:[],instanceEventFrames:[],DocIdToSentIdToTokens:{},space_char:" ",focusStartTimeStamp:0,focusEndTimeStamp:0,datatableHeader:[]}},components:{Splitpanes:D["Splitpanes"],Pane:D["Pane"],"v-chart":$e["a"]},mounted:function(){},methods:{getInstances:function(e){for(var t=this,n={},r=0,a=Object.entries(e);r<a.length;r++){var i=Object(Z["a"])(a[r],2),o=i[0],s=i[1];"cnt"!==o&&(n[o]=s)}t.instanceEventFrames.splice(0,this.instanceEventFrames.length),t.DocIdToSentIdToTokens={},f.getEventFrame(this.currentTimelineEventType,this.focusStartTimeStamp,this.focusEndTimeStamp,n).then((function(e){var n=e.data;t.DocIdToSentIdToTokens=n.doc_id_to_sent_id_to_tokens,n.event_frames.map((function(e){t.instanceEventFrames.push(e)}))}),(function(e){console.log(e)}))},markingTriggerOrArgument:function(e,t){var n=function(e,t,n){return n>=e&&n<=t},r=e.anchorStartIdx,a=e.anchorEndIdx,i={triggerSpan:n(r,a,t),argumentSpan:!1},o=!0,s=!1,l=void 0;try{for(var c,u=e["arguments"][Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var g=c.value,d=g["argStartIdx"],f=g["argEndIdx"];i.argumentSpan=i.argumentSpan||n(d,f,t)}}catch(h){s=!0,l=h}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return i},hoverPoint:function(e){var t=this,n=this.focusEventTypeStatistics[e.dataIndex][0],r=Math.floor(new Date(n)/1e3),a=Math.floor(new Date(n)/1e3+86400);this.focusStartTimeStamp=r,this.focusEndTimeStamp=a,this.eventFramesAggr.splice(0,this.eventFramesAggr.length),this.datatableHeader.splice(0,this.datatableHeader.length),f.getEntityList(this.currentTimelineEventType,r,a).then((function(e){var n=!0,r=!1,a=void 0;try{for(var i,o=e.data[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;t.eventFramesAggr.push(s)}}catch(c){r=!0,a=c}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}var l=new Set;t.eventFramesAggr.map((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];l.add(r)}})),Object(q["a"])(l).map((function(e){t.datatableHeader.push({text:e,value:e,sortable:!0})}))}),(function(e){console.log(e)}))}},computed:{echartOption:function(){return{title:{text:this.currentTimelineEventType},tooltip:{trigger:"axis"},xAxis:{data:this.focusEventTypeStatistics.map((function(e){var t=new Date(e[0]);return String(t.getUTCFullYear())+"-"+String(t.getUTCMonth()+1)}))},yAxis:{splitLine:{show:!1}},toolbox:{left:"center",feature:{dataZoom:{yAxisIndex:"none"},restore:{},saveAsImage:{}}},dataZoom:[{},{type:"inside"}],series:{name:this.currentTimelineEventType,type:"line",data:this.focusEventTypeStatistics.map((function(e){return e[1]}))}}},currentTimelineEventType:function(){return this.$store.getters.currentTimelineEventType},focusEventTypeStatistics:function(){return this.$store.getters.currentEventTypeTimelineCount}},watch:{}}),Ke=ze,je=(n("b816"),Object(z["a"])(Ke,Ce,Re,!1,null,null,null)),Fe=je.exports;r["default"].use(i["a"]);var Ue=new i["a"]({routes:[{path:"/",name:"LearnItMain",component:we},{path:"/LabeledMappingsView",name:"LabeledMappingsView",component:Ae},{path:"/TimelineMain",name:"TimelineMain",component:Fe}]}),Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("v-content",{staticStyle:{width:"100%",height:"100vh"}},[n("v-snackbar",{attrs:{"multi-line":"",timeout:e.pendingSnackbarTimeout,top:"",color:"info"},model:{value:e.pendingSnackbar,callback:function(t){e.pendingSnackbar=t},expression:"pendingSnackbar"}},[e._v(" "+e._s(e.pendingSnackbarText)+" "),n("v-btn",{attrs:{color:"white",flat:""},on:{click:function(t){e.pendingSnackbar=!1}}},[e._v(" Close ")])],1),n("v-snackbar",{attrs:{"multi-line":"",timeout:e.errorSnackbarTimeout,top:"",color:"error"},model:{value:e.errorSnackbar,callback:function(t){e.errorSnackbar=t},expression:"errorSnackbar"}},[e._v(" "+e._s(e.errorSnackbarText)+" "),n("v-btn",{attrs:{color:"white",flat:""},on:{click:function(t){e.errorSnackbar=!1}}},[e._v(" Close ")])],1),n("router-view")],1)],1)},Je=[],De={name:"App",store:N,data:function(){return{pendingSnackbar:!1,pendingSnackbarTimeout:4e3,pendingSnackbarText:"",errorSnackbar:!1,errorSnackbarTimeout:4e3,errorSnackbarText:""}},computed:{pendingMessage:function(){return this.$store.getters.pendingMessage},errorMessage:function(){return this.$store.getters.errorMessage}},watch:{pendingMessage:function(e,t){e&&e.length>0?(this.pendingSnackbarText=e,this.pendingSnackbar=!0):e&&0!=e.length||(this.pendingSnackbar=!1)},pendingSnackbar:function(e,t){(!e||e.length<1)&&this.$store.commit("changePendingMessage",{pendingMessage:""})},errorMessage:function(e,t){e&&e.length>0?(this.errorSnackbarText=e,this.errorSnackbar=!0):e&&0!=e.length||(this.errorSnackbar=!1)},errorSnackbar:function(e,t){(!e||e.length<1)&&this.$store.commit("changeErrorMessage",{errorMessage:""})}}},Ve=De,Ge=(n("034f"),Object(z["a"])(Ve,Be,Je,!1,null,null,null)),He=Ge.exports,We=n("ce5b"),qe=n.n(We);n("bf40");r["default"].use(a["a"]),r["default"].use(qe.a,{iconfont:"md"}),r["default"].config.productionTip=!1;var Ze=new r["default"]({router:Ue,render:function(e){return e(He)}});Ze.$mount("#app")},"5a77":function(e,t,n){"use strict";var r=n("1088"),a=n.n(r);a.a},"647a":function(e,t,n){"use strict";var r=n("afc0"),a=n.n(r);a.a},"788f":function(e,t,n){},"85ec":function(e,t,n){},afc0:function(e,t,n){},b816:function(e,t,n){"use strict";var r=n("522c"),a=n.n(r);a.a},ceb4:function(e,t,n){"use strict";var r=n("fb70"),a=n.n(r);a.a},fb70:function(e,t,n){}});
//# sourceMappingURL=app.7a5f39cc.js.map