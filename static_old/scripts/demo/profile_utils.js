var relDescs = {}
relDescs["0: Part_Whole_Geographical"] = "Contains GPEs:";
relDescs["1: Part_Whole_Geographical"] = "Geographically part of:";
relDescs["0: Org_Aff_Membership"] = "Has members:";
relDescs["1: Org_Aff_Membership"] = "Is member of:";
relDescs["0: Gen_Aff_Org-Location"] = "Contains ORGs:";
relDescs["1: Gen_Aff_Org-Location"] = "Is based in:";
relDescs["0: Per_Social_Family"] = "Family members:";
relDescs["1: Per_Social_Family"] = "Family members:";
relDescs["0: Agent_Artifact_User-Owner-Inventor-Manufacturer"] = "Used/Owned by:";
relDescs["1: Agent_Artifact_User-Owner-Inventor-Manufacturer"] = "Uses/Owns:";


relDescs["1: kbp_org_date_founded"] = "Founded on:";
relDescs["0: kbp_org_date_founded"] = "Founded on this date:";

relDescs["1: kbp_org_employee"] = "has_employee";
relDescs["0: kbp_org_employee"] = "employee_of:";

relDescs["1: kbp_org_founder"] = "has_founder:";
relDescs["0: kbp_org_founder"] = "founder_of:";

relDescs["1: kbp_org_hq"] = "headquartered_in";
relDescs["0: kbp_org_hq"] = "headquarter_for";

relDescs["1: kbp_org_member"] = "has_member:";
relDescs["0: kbp_org_member"] = "member_of";

relDescs["1: kbp_per_birthplace"] = "has_birthplace:";
relDescs["0: kbp_per_birthplace"] = "birthplace_for:";

relDescs["1: kbp_per_dob"] = "has_date_of_birth:";
relDescs["0: kbp_per_dob"] = "date_of_birth_for:";

relDescs["1: kbp_per_origin"] = "has_origin:";
relDescs["0: kbp_per_origin"] = "origin_for";

relDescs["1: kbp_per_parents"] = "has_parents:";
relDescs["0: kbp_per_parents"] = "parents_for";

relDescs["1: kbp_per_residence"] = "has_residence_in";
relDescs["0: kbp_per_residence"] = "residence_for";

relDescs["1: kbp_per_siblings"] = "siblings:";
relDescs["0: kbp_per_siblings"] = "siblings:";

relDescs["1: kbp_per_spouse"] = "spouse:";
relDescs["0: kbp_per_spouse"] = "spouse:";

relDescs["1: kbp_org_alternate_names"] = "alternate name:";
relDescs["0: kbp_org_alternate_names"] = "alternate name:";

relDescs["1: kbp_org_date_dissolved"] = "date dissolved:";
relDescs["0: kbp_org_date_dissolved"] = "organizations dissolved:";

relDescs["1: kbp_org_founded_by"] = "founded by:";
relDescs["0: kbp_org_founded_by"] = "organization founded:";

relDescs["1: kbp_org_members"] = "members:";
relDescs["0: kbp_org_members"] = "member of:";

relDescs["1: kbp_org_parents"] = "parent organization:";
relDescs["0: kbp_org_parents"] = "subsidiary:";

relDescs["1: kbp_org_place_of_headquarters"] = "place of headquarters:";
relDescs["0: kbp_org_place_of_headquarters"] = "organizations located here:";

relDescs["1: kbp_org_shareholders"] = "shareholders:";
relDescs["0: kbp_org_shareholders"] = "shareholder of:";

relDescs["1: kbp_org_website"] = "website:";
relDescs["0: kbp_org_website"] = "website of:";

relDescs["1: kbp_per_date_of_birth"] = "date of birth:";
relDescs["0: kbp_per_date_of_birth"] = "people born:";

relDescs["1: kbp_per_date_of_death"] = "date of death:";
relDescs["0: kbp_per_date_of_death"] = "people died:";

relDescs["1: kbp_per_employee_or_member_of"] = "employee or member of:";
relDescs["0: kbp_per_employee_or_member_of"] = "employee or member:";

relDescs["1: kbp_per_origin"] = "origin:";
relDescs["0: kbp_per_origin"] = "origin of:";

relDescs["1: kbp_per_other_family"] = "other family:";
relDescs["0: kbp_per_other_family"] = "other family:";

relDescs["1: kbp_per_parents"] = "parents:";
relDescs["0: kbp_per_parents"] = "children:";

relDescs["1: kbp_per_place_of_birth"] = "place of birth:";
relDescs["0: kbp_per_place_of_birth"] = "people born:";

relDescs["1: kbp_per_place_of_death"] = "place of death:";
relDescs["0: kbp_per_place_of_death"] = "people died:";

relDescs["1: kbp_per_place_of_residence"] = "place of residence:";
relDescs["0: kbp_per_place_of_residence"] = "people lived:";

relDescs["1: kbp_per_schools_attended"] = "schools attended:";
relDescs["0: kbp_per_schools_attended"] = "(former) student of:";

relDescs["1: kbp_per_siblings"] = "siblings:";
relDescs["0: kbp_per_siblings"] = "siblings:";

relDescs["1: kbp_per_spouse"] = "spouse:";
relDescs["0: kbp_per_spouse"] = "spouse:";

relDescs["1: kbp_per_title"] = "title:";
relDescs["0: kbp_per_title"] = "title of:";

relDescs["1: quotation"] = "quoted_from:";
relDescs["0: quotation"] = "quoted_by:";

relDescs["1: contact"] = "has_contact:";
relDescs["0: contact"] = "has_contact:";

relDescs["1: near"] = "has visited or near:";
relDescs["0: near"] = "visited by:";

relDescs["1: per_employee_or_member_or_representative_of"] = "is an employee/member/representative of:";
relDescs["0: per_employee_or_member_or_representative_of"] = "is an employee/member/representative of:";
relDescs["1: per_near_or_occupy_loc"] = "located near/occupy:";
relDescs["0: per_near_or_occupy_loc"] = "located near/occupy:";
relDescs["1: per_student_of_org"] = "is a student of:";
relDescs["0: per_student_of_org"] = "is a student of:";
relDescs["1: per_supporter_of_per"] = "supports:";
relDescs["0: per_supporter_of_per"] = "supports:";

relDescs["1: org_founded_by"] = "Founded by:";
relDescs["0: org_founded_by"] = "Founded:";
relDescs["1: org_members"] = "Member of:";
relDescs["0: org_members"] = "Has members:";
relDescs["1: org_date_founded"] = "Founded on:";
relDescs["0: org_date_founded"] = "Founded on this date:";
relDescs["1: per_employee_or_member_of"] = "Employee/member of:";
relDescs["0: per_employee_or_member_of"] = "Employs/has members:";
relDescs["1: org_place_of_headquarters"] = "Headquartered at:";
relDescs["0: org_place_of_headquarters"] = "Headquartered here:";
relDescs["1: per_place_of_birth"] = "Born in:";
relDescs["0: per_place_of_birth"] = "Born here:";
relDescs["1: per_date_of_birth"] = "Born on:";
relDescs["0: per_date_of_birth"] = "Born on this date:";
relDescs["1: per_origin"] = "Originates from:";
relDescs["0: per_origin"] = "Originating from here:";
relDescs["1: per_parents"] = "Parents:";
relDescs["0: per_parents"] = "Children:";
relDescs["1: per_place_of_residence"] = "resides in:";
relDescs["0: per_place_of_residence"] = "residences:";
relDescs["1: per_siblings"] = "Siblings:";
relDescs["0: per_siblings"] = "Siblings:";
relDescs["1: per_spouse"] = "Spouse:";
relDescs["0: per_spouse"] = "Spouse:";

relDescs["1: org_alternate_names"] = "alternate names:";
relDescs["0: org_alternate_names"] = "alternate names:";
relDescs["1: per_schools_attended"] = "schools attended:";
relDescs["0: per_schools_attended"] = "(former) student of:";
relDescs["1: org_parents"] = "parent organization:";
relDescs["0: org_parents"] = "subsidiary:";
relDescs["1: org_shareholders"] = "shareholders:";
relDescs["0: org_shareholders"] = "shareholder of:";


relDescs["1: per_title"] = "has title:";

relDescs["1: per_against_per"] = "is_against:";
relDescs["0: per_against_per"] = "is_against:";
relDescs["1: per_contact_per"] = "has_contact:";
relDescs["0: per_contact_per"] = "has_contact:";

relDescs["0: unary_per_statement"] = "Statements:";
relDescs["1: unary_per_statement"] = "Statements:";

//Map loader needs this
function matchDisplayLoader(data) {
    return new MatchInfoDisplay(data);
}

function MatchInfoDisplay(data) {
  var self = this;

  // self.target = loadTarget(data.target);  
  self.target = loadSmallTarget(data.target);	// try to handle memory issues
  self.slot0s = [];
  self.slot1s = [];
  
  self.canonicalSlot0s = [];
  self.canonicalSlot1s = [];

  self.slot0sEntityType = [];
  self.slot1sEntityType = [];

  self.primaryLanguage = data.primaryLanguage;

  self.docId = null;
  self.isValidTransliteration = data.isValidTransliteration;

  self.langDisplays = {};
  for (var lang in data.langDisplays) {
      self.langDisplays[lang] = new LangMatchInfoDisplay(data.langDisplays[lang]);
      if (self.langDisplays[lang].instance != null) {
          self.slot0s.push(self.langDisplays[lang].seed.slot0);
          self.slot1s.push(self.langDisplays[lang].seed.slot1);

          self.canonicalSlot0s.push(self.langDisplays[lang].canonicalSeed.slot0);
          self.canonicalSlot1s.push(self.langDisplays[lang].canonicalSeed.slot1);

          self.slot0sEntityType.push(self.langDisplays[lang].instance.slot0EntityType);
          self.slot1sEntityType.push(self.langDisplays[lang].instance.slot1EntityType);

          if (self.docId == null) self.docId = self.langDisplays[lang].instance.docid;
      }
  }
  
  self.slot0String = self.slot0s.join("<br/>");
  self.slot1String = self.slot1s.join("<br/>");

  self.getHtml = function() {
  		var engSeedHtml = self.langDisplays['english'].seed != null ? " " + self.langDisplays['english'].seed.html() : "";
      var engCanonicalSeedHtml = self.langDisplays['english'].canonicalSeed != null ? " " + self.langDisplays['english'].canonicalSeed.html() : "";
      var chiSeedHtml = self.langDisplays['chinese'].seed != null ? " " + self.langDisplays['chinese'].seed.html() : "";
      //var result = self.docId + engSeedHtml + engCanonicalSeedHtml + chiSeedHtml + "<br/>";
      var result = self.docId + engSeedHtml + chiSeedHtml + "<br/>";
      for (var lang in self.langDisplays) {
          result += "<strong>"+lang+"</strong>";
          result += "<br />"+self.langDisplays[lang].html.split("<br/>")[0]+"<br/>";
      }
      return result;
  }
  self.html = self.getHtml();

  self.getPrimaryLanguageHtml = function() {
      return self.langDisplays[self.primaryLanguage].html;
  }
  self.primaryLanguageHtml = self.getPrimaryLanguageHtml();

  self.toString = function() {
      var langStrings = [];
      for (var lang in self.langDisplays) {
          langStrings.push(self.langDisplays[lang]);
      }
      return "MatchInfoDisplay:[target="+self.target.name()+", langDisplays="+langStrings.join(", ")+"]";
  }
}

function LangMatchInfoDisplay(data) {
  var self = this;

  self.language = data.language;
  self.html = data.html;
  self.visualizationLink = data.visualizationLink;
  //self.sentenceTokens = data.sentenceTokens;
  
  if (data.instance != null) {
    self.instance = new InstanceIdentifier(data.instance);
    self.seed = new Seed(data.seed);
  } else {
    self.instance = null;
    self.seed = null;
  }

  if(data.canonicalSeed != null) {
    self.canonicalSeed = new Seed(data.canonicalSeed);
  }
  else {
    self.canonicalSeed = null;
  }
  
  self.toString = function() {
    if (self.instance != null) {
        return "LanguageMatchInfoDisplay:[language="+self.language+", instance="+self.instance.toString()+", seed="+self.seed.toString()+"]";
    } else {
        return self.html;
    }
  }
}

function InstanceIdentifier(data) {
  var self = this;

  this.docid = data.docid;
  this.sentid = data.sentid;
  this.slot0Start = data.slot0Start;
  this.slot0End = data.slot0End;
  this.slot1Start = data.slot1Start;
  this.slot1End = data.slot1End;
  this.slot0EntityType = data.s0EType;
  this.slot1EntityType = data.s1EType;

  this.toString = function() {
      return self.docid+":"+self.sentid+":"+self.slot0Start+"-"+self.slot0End+":"+self.slot1Start+"-"+self.slot1End;
  }

  this.json = function() {
    return JSON.stringify({docid: self.docid, sentid:self.sentid,
      slot0Start:self.slot0Start, slot0End:self.slot0End,
      slot1Start:self.slot1Start, slot1End:self.slot1End});
  }
}
